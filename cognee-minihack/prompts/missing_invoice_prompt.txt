Missing Invoice Detective — prompt

Task: Detect missing or late invoices for a specific vendor and period using ONLY the cognitive graph facts available to you.

Inputs
- Vendor: {{VENDOR_NAME_OR_ID}}
- Period: {{DATE_RANGE}} (e.g., “2025-08-01 to 2025-10-31”)
- Optional: Expected cadence hint: {{CADENCE_HINT}} (e.g., “monthly”, “weekly”, “unknown”)

Rules
1) Use ONLY information present in the cognitive graph.
2) Do NOT assume raw CSV access.
3) If evidence is insufficient, say so clearly.
4) Separate facts vs inferences.
5) Prefer precision over breadth.

What to analyze
- Invoice entities linked to the vendor.
- Related transactions/payments.
- Recurring patterns in amounts, dates, references.
- Any references to POs/contracts if present.

Output format (JSON)
Return a single JSON object:
{
  "vendor": "{{VENDOR_NAME_OR_ID}}",
  "period": "{{DATE_RANGE}}",
  "evidence_found": {
    "invoices_in_period": 0,
    "payments_in_period": 0,
    "linked_po_or_contract_signals": "none | weak | strong"
  },
  "expected_invoice_pattern": {
    "pattern_type": "observed | inferred | unknown",
    "cadence": "monthly | weekly | irregular | unknown",
    "typical_amount_range": "string or null",
    "basis": "short explanation"
  },
  "missing_or_suspected_missing_invoices": [
    {
      "suspected_invoice_window": "YYYY-MM-DD to YYYY-MM-DD",
      "expected_amount_hint": "string or null",
      "reason": "short, evidence-based reason",
      "supporting_graph_signals": ["signal1", "signal2"]
    }
  ],
  "risk_flags": [
    {
      "type": "missing_invoice | late_invoice | unmatched_payment | gap_in_sequence",
      "evidence": "short text"
    }
  ],
  "recommended_next_actions": [
    "short action 1",
    "short action 2"
  ],
  "confidence": "low | medium | high",
  "notes": "1-2 sentences; mention data limitations explicitly"
}

Reasoning steps
- Step 1: List invoices linked to {{VENDOR_NAME_OR_ID}} inside {{DATE_RANGE}}.
- Step 2: Identify historical cadence before/after the period (if graph contains it).
- Step 3: Compare expected cadence vs observed invoices.
- Step 4: Check if payments exist without matching invoices.
- Step 5: Produce evidence-first suspected missing windows.
- Step 6: Provide 1–3 crisp next actions.

